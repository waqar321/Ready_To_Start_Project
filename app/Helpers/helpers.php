<?php

use chillerlan\QRCode\QRCode;


if (! function_exists('api_url')) 
{
    function api_url($path = null, $url_type = 1)
    {        
        if ($url_type == 1) 
        {
            if (is_null($path)) 
            {
                return config('app.api_url');
            } else {
                return config('app.api_url') . $path;
            }
        }
    }
}

if (!function_exists('extractOnlyNumbers')) 
{
    function extractOnlyNumbers($string) {

        return preg_replace('/\D/', '', $string);
    }

}

if (! function_exists('generate_qr_code')) 
{
    function generate_qr_code($code,$style = '')
    {
        return  '<img '.$style.'  src="'.(new QRCode)->render($code).'" alt="QR Code" />';
        //return QrCode::format('png')->size(399)->color(40,40,40)->generate('Make me a QrCode!');
        //return QrCode:: generate($code);
    }
}

if (!function_exists('remove_all_unwanted_characters')) 
{

    function remove_all_unwanted_characters($string, $removeLineBreaks = false) {

        if ($string != '') {
            $string = preg_replace('/[^\/a-zA-Z0-9_ %\[\]\.\(\)%,#&-]/s', '', $string);
            if ($removeLineBreaks) {
                str_replace(["\n", "\t", "\r"], "", $string);
            }
            $string = strip_quotes($string);
            $string = reduce_double_slashes($string);
            $string = strip_slashes($string);
            $result = $string;
        }

        return $result;
    }

}

if (! function_exists('generate_barcode_image')) 
{
    function generate_barcode_image($code,$style = 'style="width:180px;height:40px"')
    {
        $generator = new Picqer\Barcode\BarcodeGeneratorPNG();
        return '<img '.$style.' src="data:image/png;base64,' . base64_encode($generator->getBarcode($code, $generator::TYPE_CODE_128)) . '">';

    }
}

if (! function_exists('url_secure')) 
{
    /**
     * Generate a HTTPS url for the application.
     *
     * @param  string  $path
     * @param  mixed  $parameters
     * @return string
     */
    function url_secure($path, $parameters = [])
    {
        $http_ssl = config('app.http_ssl');

        if($http_ssl == 'on') 
        {
            return url($path, $parameters, true);
        }
        else
        {
            return url($path, $parameters, false);
        }
    }
}

if (! function_exists('login_url')) 
{
    function login_url($path = null, $url_type = 1)
    {
        if ($url_type == 1) {
            if (is_null($path)) {
                return url_secure('api');
            } else {
                return url_secure('api').'/'. $path;
            }
        }
    }
}
if (! function_exists('url_secure_api')) 
{
 
    /**
     * Generate a HTTPS url for the application.
     *
     * @param  string  $path
     * @param  mixed  $parameters
     * @return string
     */
    function url_secure_api($path)
    {
        $url = request()->header('origin');
        // return   $url.'/LMS/public/'.$path;
        return   $url.'/'.$path;
    }
}
if (! function_exists('formatToPakistanFormat')) {
    function formatToPakistanFormat($phone)
    {
        // Remove any non-numeric characters
        $phone = preg_replace('/\D/', '', $phone);

        // Check if the number doesn't start with "92", then add it
        if (substr($phone, 0, 2) !== '92') {
            $phone = '92' . $phone;
        }

        return $phone;
    }
}
if (!function_exists('restrictSpecialCharaters')) 
{
    function restrictSpecialCharaters($string) 
    {
        $str = preg_replace("/[^-a-zA-Z0-9,._#$+\"\/]/", ' ', $string);

        return reduce_multiples($str, " ", TRUE);
                //return preg_replace('/[^a-zA-Z0-9\.\/]/', ' ', $string);
    }
}
if ( ! function_exists('reduce_multiples'))
{
    function reduce_multiples($str, $character = ',', $trim = FALSE)
    {
        $str = preg_replace('#'.preg_quote($character, '#').'{2,}#', $character, $str);

        if ($trim === TRUE)
        {
            $str = trim($str, $character);
        }

        return $str;
    }
}
if ( ! function_exists('revertal_clients_data'))
{
    function revertal_clients_data()
    {
       $array = [
           556934,
           569687,
           556332,
           556683,
           559036,
           560080,
           565995,
           593023,
           598312,
           608883,
           609310,
           615300,
           574833,
           573901,
           577506,
           579168,
           556978,
           558686,
           562312,
           563225,
           565637,
           566284,
           567065,
           567784,
           568279,
           568887,
           569008,
           570822,
           570869,
           570871,
           571217,
           572029,
           572173,
           572408,
           572563,
           573086,
           573922,
           574120,
           574157,
           571820,
           582394,
           588784,
           590303,
           591002,
           592211,
           595588,
           596026,
           596024,
           596025,
           596023,
           596176,
           597168,
           598063,
           597911,
           598308,
           599187,
           599622,
           600499,
           599452,
           600996,
           601616,
           603878,
           603283,
           604699,
           604086,
           604974,
           605462,
           604439,
           604800,
           605197,
           605664,
           606010,
           606350,
           606786,
           606835,
           607083,
           606874,
           608462,
           608927,
           608821,
           609808,
           610951,
           561828,
           561857,
           563609,
           563676,
           565076,
           566637,
           566792,
           567112,
           567093,
           568442,
           568463,
           568737,
           570080,
           571409,
           571931,
           572164,
           572776,
           572820,
           573442,
           573443,
           574472,
           576378,
           576639,
           576833,
           577278,
           577139,
           577117,
           578212,
           578108,
           578489,
           578688,
           579686,
           578851,
           579642,
           581454,
           581819,
           582255,
           582504,
           584203,
           585307,
           585095,
           585829,
           585931,
           586359,
           586711,
           587343,
           587768,
           587894,
           588045,
           588525,
           589378,
           589823,
           589826,
           589700,
           589704,
           589829,
           590081,
           590091,
           590218,
           590338,
           585856,
           591629,
           591625,
           591747,
           592372,
           592660,
           593671,
           593670,
           593955,
           594095,
           594894,
           595294,
           596057,
           596076,
           596320,
           596514,
           597108,
           597302,
           597478,
           597496,
           597576,
           599108,
           601191,
           601628,
           601944,
           602755,
           602630,
           602629,
           603691,
           603614,
           604081,
           604317,
           604444,
           604832,
           605330,
           606120,
           607896,
           608974,
           611709,
           612002,
           612229,
           612544,
           590024,
           600223,
           601365,
           603022,
           604144,
           604707,
           608448,
           594667,
           596662,
           596786,
           597645,
           600784,
           601440,
           605332,
           605333,
           603140,
           604083,
           604815,
           604924,
           605651,
           605914,
           606077,
           606076,
           606798,
           611147,
           611194,
           613544,
           580228,
           581247,
           582946,
           583186,
           584825,
           587885,
           587932,
           590225,
           590900,
           592006,
           593437,
           594167,
           594622,
           595386,
           596042,
           596133,
           597031,
           597196,
           597654,
           597845,
           597947,
           598780,
           599588,
           599725,
           600122,
           600364,
           600615,
           600725,
           600866,
           600925,
           601119,
           601392,
           601709,
           601791,
           602506,
           602698,
           602888,
           603148,
           603256,
           603627,
           604220,
           604265,
           604394,
           605007,
           605162,
           605289,
           605545,
           606158,
           606922,
           607354,
           607720,
           607857,
           607915,
           608014,
           608094,
           609188,
           609268,
           609395,
           609649,
           610630,
           611268,
           575171,
           576394,
           576634,
           577844,
           578067,
           578344,
           578893,
           578902,
           578975,
           579095,
           582454,
           582868,
           583844,
           584722,
           586214,
           586322,
           586485,
           586791,
           586855,
           586948,
           587589,
           587999,
           588288,
           588476,
           588638,
           588951,
           588950,
           589033,
           589153,
           589357,
           589518,
           589615,
           589628,
           589631,
           589778,
           590042,
           590366,
           590401,
           590666,
           590703,
           590794,
           591697,
           591698,
           592016,
           592440,
           592605,
           592617,
           592703,
           592757,
           592929,
           593076,
           593132,
           593251,
           593286,
           593431,
           593538,
           593738,
           593940,
           594084,
           594226,
           594238,
           594263,
           594311,
           594334,
           594358,
           594459,
           594665,
           594705,
           594747,
           594753,
           594936,
           595041,
           595086,
           595093,
           595112,
           595548,
           595600,
           595736,
           595795,
           595948,
           596000,
           596143,
           596295,
           596347,
           596395,
           596780,
           596810,
           596878,
           596999,
           597107,
           597119,
           597154,
           597293,
           597300,
           597320,
           597357,
           597575,
           597691,
           597743,
           597921,
           598536,
           598589,
           598674,
           598737,
           598964,
           599123,
           599096,
           599124,
           599314,
           599604,
           599742,
           599778,
           600030,
           600106,
           600465,
           600513,
           600522,
           600764,
           600861,
           601100,
           601274,
           601324,
           601362,
           601593,
           601805,
           601867,
           602180,
           602374,
           602512,
           602615,
           602639,
           602817,
           602956,
           603215,
           603245,
           603757,
           604011,
           604012,
           604199,
           604427,
           604506,
           604535,
           605037,
           605213,
           605246,
           605500,
           606108,
           606324,
           606420,
           606639,
           606676,
           606801,
           606804,
           606951,
           607307,
           607316,
           607426,
           607489,
           607503,
           607504,
           607839,
           608109,
           608656,
           608762,
           609017,
           609018,
           609043,
           611234,
           612912,
           613161,
           615602,
           2706,
           563546,
           564251,
           564896,
           564478,
           568099,
           566065,
           566602,
           567658,
           568535,
           569968,
           569128,
           609282,
           609280,
           570577,
           571104,
           571694,
           571803,
           573216,
           572497,
           573002,
           573152,
           573390,
           573772,
           573692,
           574249,
           574216,
           574025,
           575779,
           574341,
           574866,
           575088,
           575090,
           575465,
           575906,
           575244,
           575067,
           576499,
           581442,
           579241,
           578523,
           579145,
           579273,
           579773,
           579242,
           580432,
           579691,
           579769,
           580326,
           580270,
           582301,
           582956,
           582545,
           582990,
           583012,
           586189,
           586611,
           586382,
           591435,
           586178,
           586816,
           586164,
           586966,
           585787,
           586721,
           589972,
           587279,
           587518,
           587959,
           589656,
           588059,
           588543,
           589891,
           591635,
           588339,
           589269,
           589619,
           590174,
           590175,
           588716,
           588908,
           589183,
           591402,
           590406,
           589287,
           589462,
           589729,
           590349,
           591232,
           592809,
           590797,
           591667,
           591646,
           591977,
           592067,
           593850,
           593202,
           592865,
           594757,
           593978,
           594210,
           595350,
           595349,
           594349,
           603115,
           593821,
           595666,
           595864,
           595865,
           594277,
           594578,
           594577,
           594683,
           596354,
           597965,
           594690,
           595282,
           594607,
           596141,
           598714,
           594640,
           597157,
           597372,
           598858,
           596480,
           596939,
           596936,
           597417,
           597717,
           597053,
           596159,
           596974,
           596957,
           596232,
           598462,
           598797,
           596301,
           597702,
           596745,
           597139,
           597236,
           599402,
           597856,
           598724,
           598719,
           598984,
           599056,
           599171,
           599382,
           599425,
           598976,
           598646,
           598903,
           599174,
           599744,
           600297,
           598995,
           601258,
           602273,
           599411,
           599624,
           599828,
           600159,
           600580,
           600720,
           600878,
           600156,
           602540,
           602950,
           603263,
           599942,
           599799,
           600565,
           599736,
           599874,
           600205,
           600298,
           555912,
           555972,
           556017,
           602048,
           600282,
           602408,
           600309,
           602357,
           602652,
           602923,
           602045,
           601819,
           602650,
           602687,
           602681,
           601214,
           602003,
           602364,
           602590,
           602772,
           601814,
           602643,
           602780,
           601193,
           602054,
           601210,
           601812,
           602948,
           602947,
           601521,
           601734,
           602574,
           601871,
           602043,
           603750,
           603309,
           602536,
           602538,
           603218,
           603655,
           604164,
           602612,
           603196,
           603611,
           603938,
           606611,
           603763,
           604121,
           604839,
           605452,
           606263,
           604580,
           605198,
           604819,
           604650,
           604749,
           604750,
           606681,
           604478,
           605153,
           605311,
           605222,
           609138,
           604619,
           606403,
           607140,
           605096,
           605659,
           605658,
           557879,
           559248,
           569850,
           559054,
           606023,
           606876,
           606402,
           608664,
           606688,
           606774,
           606834,
           608096,
           608044,
           606757,
           608698,
           607760,
           606969,
           607200,
           607192,
           607345,
           607642,
           608160,
           609376,
           607282,
           607351,
           607774,
           609088,
           610800,
           608580,
           611084,
           615089,
           612570,
           615311
       ];
       return $array;
    }
}

